<div class="container mt-5">
<div class="jumbotron p-4 bg-light rounded">
<h2 class="mb-4">Rejestracja podróży</h2>
<h5 class="mb-5">Sekcja 1: Dane osobowe podróżującego</h5>
  <form (ngSubmit)="onSubmit()">
    <div class="row">

      <div class="col-md-6">
        <div formGroupName="name">
          <div class="mb-3">
            <label for="firstName" class="form-label">Imię</label>
            <input id="firstName" formControlName="firstName" class="form-control" />
            <div *ngIf="form.get('name.firstName')?.invalid && form.get('name.firstName')?.touched" class="text-danger">
              Imię jest wymagane.
            </div>
          </div>

          <div class="mb-3">
            <label for="lastName" class="form-label">Nazwisko</label>
            <input id="lastName" formControlName="lastName" class="form-control" />
            <div *ngIf="form.get('name.lastName')?.invalid && form.get('name.lastName')?.touched" class="text-danger">
              Nazwisko jest wymagane.
            </div>
          </div>

          <div class="mb-3">
            <label for="pesel" class="form-label">PESEL</label>
            <input id="pesel" formControlName="pesel" class="form-control" />
            <div *ngIf="form.get('name.pesel')?.invalid && form.get('name.pesel')?.touched" class="text-danger">
              PESEL jest wymagany i musi zawierać 11 cyfr.
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div formGroupName="address">
          <div class="mb-3">
            <label for="street" class="form-label">Ulica</label>
            <input id="street" formControlName="street" class="form-control" />
            <div *ngIf="form.get('address.street')?.invalid && form.get('address.street')?.touched" class="text-danger">
              Ulica jest wymagana.
            </div>
          </div>

          <div class="mb-3">
            <label for="city" class="form-label">Miasto</label>
            <input id="city" formControlName="city" class="form-control" />
            <div *ngIf="form.get('address.city')?.invalid && form.get('address.city')?.touched" class="text-danger">
              Miasto jest wymagane.
            </div>
          </div>

          <div class="mb-3">
            <label for="postalCode" class="form-label">Kod pocztowy</label>
            <input id="postalCode" formControlName="postalCode" class="form-control" />
            <div *ngIf="form.get('address.postalCode')?.invalid && form.get('address.postalCode')?.touched" class="text-danger">
              Kod pocztowy jest wymagany.
            </div>
          </div>

          <div class="mb-3">
            <label for="country" class="form-label">Kraj</label>
            <select id="country" formControlName="country" class="form-select">
              <option value="">Wybierz kraj</option>
              <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
            </select>
            <div *ngIf="form.get('address.country')?.invalid && form.get('address.country')?.touched" class="text-danger">
              Kraj jest wymagany.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row justify-content-center mt-4">
           <div class="col-auto">
        <button 
          type="button" 
          class="btn btn-secondary" 
          style="width:100px;" 
          (click)="goBack()">
          Cofnij
        </button>
      </div> 
      
      <div class="col-auto">
        <button 
          type="submit" 
          class="btn btn-primary"
          style="width:100px;" 
          [disabled]="!name.firstName || !name.lastName || !name.pesel || !address.street || !address.city || !address.postalCode || !address.country">
          Zatwierdź
        </button>
      </div>

    </div>
  </form>

  <div class="button-container">
    <a href="/register/number_of_stages" class="btn btn-secondary btn-lg">Dalej</a>
  </div>

</div>
</div>
